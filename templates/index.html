<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CivicTrack - Legislative Activity</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>CivicTrack - Legislative Activity</h1>

    <label for="member-select">Choose a Member:</label>
    <!-- Check if the 'members' list passed from Flask has items -->
    {% if members %}
        <select name="members" id="member-select">
            <option value="">--Please choose an option--</option>
            <!-- Loop through the 'members' list -->
            {% for member in members %}
                <!-- Ensure 'member.bioguide_id' and 'member.name' exist -->
                <option value="{{ member.bioguide_id }}">{{ member.name }}</option>
            {% endfor %}
        </select>
    {% else %}
        <!-- Display message if no members were loaded -->
        <p style="color: red; font-weight: bold;">Could not load member list. Please check application logs.</p>
        <select name="members" id="member-select" disabled>
             <option value="">-- Member List Unavailable --</option>
        </select>
    {% endif %}


    <div id="member-info" style="margin-top: 20px;">
        <!-- Data sections -->
        <section id="member-details-section">
             <h2>Member Details</h2>
             <!-- ARIA Live region for announcements -->
             <div id="member-status" aria-live="polite">
                <p id="member-details-content">Select a member to view details.</p>
             </div>
        </section>

        <hr> <!-- Visual separator -->

        <section id="committee-section">
            <h2>Committee Assignments</h2>
            <!-- ARIA Live region -->
            <div id="committee-status" aria-live="polite">
                <div class="loader"></div> <!-- Loader -->
                <ul id="committee-list">
                    <li>Select a member to view committees.</li>
                </ul>
             </div>
        </section>

        <hr> <!-- Visual separator -->

         <section id="sponsored-bills-section">
            <h2>Recently Sponsored Bills</h2>
             <!-- ARIA Live region -->
             <div id="sponsored-bills-status" aria-live="polite">
                <div class="loader"></div> <!-- Loader -->
                <ul id="sponsored-bills-list">
                    <li>Select a member to view sponsored bills.</li>
                </ul>
             </div>
        </section>

        <hr> <!-- Visual separator -->

        <section id="votes-section">
            <h2>Recent Votes</h2>
             <!-- ARIA Live region -->
             <div id="votes-status" aria-live="polite">
                <div class="loader"></div> <!-- Loader -->
                <ul id="vote-list">
                    <li>Select a member to view votes.</li>
                </ul>
             </div>
        </section>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>